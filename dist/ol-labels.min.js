const TypedMap=Map;var ol;!function(e){e.resolutionToMinT=function(e){var t=window.minTCoeff||1,n=window.minTFac||9,a=Math.log2(156543.03390625)-Math.log2(e);return a<=3?1e4:t*Math.pow(2,n-(a-1))},e.calculateLabelFactor=function(e){var t=e.get("lbl_fac"),n=window.labelFacCoeff||1.1;return parseInt(t)*n}}(ol||(ol={})),function(e){e.control||(e.control={})}(ol||(ol={})),function(e){!function(t){t.DebugMenu=class extends e.control.Control{constructor(e){e=e||{};var t=document.createElement("div");super({element:t,target:e.target}),this.container=t,this.container.className="ol-debug-menu ol-control ol-collapsed",this.menu=document.createElement("div"),this.menu.className="",this.btn=document.createElement("button"),this.btn.className="menu-toggle-button",this.btnIcon={openMenu:">_",closeMenu:"X"},this.btn.innerHTML=this.btnIcon.openMenu;var n=this;this.btn.addEventListener("click",function(e){n.toggleMenu()}),this.container.appendChild(this.btn),this.container.appendChild(this.menu),this.state={open:!1,isDemoModeRunning:!1}}toggleMenu(){!0===this.state.open?this.closeMenu():this.openMenu(),this.state.open=!this.state.open}openMenu(){this.btn.innerHTML=this.btnIcon.closeMenu,this.menu.style.display="",0==this.menu.innerHTML.length&&this.renderMenuContents()}closeMenu(){this.btn.innerHTML=this.btnIcon.openMenu,this.menu.style.display="none"}renderMenuContents(){let e=this.getMap(),t=e.getView();var n=document.createElement("div");n.style.margin="10px";var a=n.cloneNode(),i=document.createElement("input");i.setAttribute("type","checkbox"),i.id="hideTilesCheckbox";var o=document.createElement("label");o.htmlFor=i.id,o.appendChild(i),o.appendChild(document.createTextNode("Hide tiles")),a.appendChild(o),i.addEventListener("change",function(e){E.toggleHideTiles_(e)});var r=n.cloneNode(),l=document.createElement("input");l.style.width="300px",l.setAttribute("type","range"),l.setAttribute("id","areaTransparencyRange"),l.setAttribute("min","0.0"),l.setAttribute("max","1.0"),l.setAttribute("step","0.01"),l.defaultValue="1.0";var s=document.createElement("label");s.id="areaTransparencyLabel",s.htmlFor="areaTransparencyRange",s.appendChild(document.createTextNode("Set the opacity of areas: (1.0)")),r.appendChild(s),r.appendChild(document.createElement("br")),r.appendChild(l),l.addEventListener("input",function(e){E.changeAreaTransparency_(e)});var c=n.cloneNode(),d=document.createElement("input");d.setAttribute("type","checkbox"),d.id="drawCirclesCheckbox";var u=document.createElement("label");u.htmlFor="drawCirclesCheckbox",u.appendChild(d),u.appendChild(document.createTextNode("Draw circles around the labels")),c.appendChild(u),d.addEventListener("change",function(e){E.toggleDrawCircles_(e)}),window.debugDrawCirc=!1;var h=n.cloneNode(),m=document.createElement("input");m.style.width="300px",m.setAttribute("type","range"),m.setAttribute("id","labelfactorRange"),m.setAttribute("min","0.0"),m.setAttribute("max","3.0"),m.setAttribute("step","0.1"),m.defaultValue="1.1";var p=document.createElement("label");p.id="labelFactorLabel",p.htmlFor="labelfactorRange",p.appendChild(document.createTextNode("Set the coefficient of the labelFactor: (1.1)")),h.appendChild(p),h.appendChild(document.createElement("br")),h.appendChild(m),m.addEventListener("input",function(e){E.changeLabelFactor_(e)}),window.labelFacCoeff=1.1;var g=n.cloneNode(),y=document.createElement("input");y.style.width="300px",y.setAttribute("type","range"),y.setAttribute("id","minTFactorRange"),y.setAttribute("min","0.0"),y.setAttribute("max","20"),y.setAttribute("step","0.1"),y.defaultValue="9";var f=document.createElement("label");f.id="minTLabel",f.htmlFor="minTFactorRange",f.appendChild(document.createTextNode("Set the offset for the calculation of the min_t: (9)")),y.addEventListener("input",function(e){E.changeMinTFactor_(e)}),g.appendChild(f),g.appendChild(document.createElement("br")),g.appendChild(y),window.minTFac=9;var v=n.cloneNode(),b=document.createElement("input");b.style.width="300px",b.setAttribute("type","range"),b.setAttribute("id","minTCoeffRange"),b.setAttribute("min","0.0"),b.setAttribute("max","5"),b.setAttribute("step","0.1"),b.defaultValue="1.0";var L=document.createElement("label");L.id="minTCoeffLabel",L.htmlFor="minTCoeffRange",L.appendChild(document.createTextNode("Set the coefficient for the calculation of the min_t: (1.0)"));var E=this;b.addEventListener("input",function(e){E.changeMinTCoeff_(e)}),v.appendChild(L),v.appendChild(document.createElement("br")),v.appendChild(b),window.minTCoeff=1;var C=n.cloneNode(),T=document.createElement("input");T.style.marginLeft="10px",T.style.width="50px",T.setAttribute("type","number"),T.setAttribute("id","zoomLevelDelta"),T.setAttribute("min","0.0"),T.setAttribute("max","10.0"),T.setAttribute("step","0.1"),T.setAttribute("value","1.0");var w=document.createElement("input");w.style.marginTop="10px",w.style.width="600px",w.setAttribute("type","range"),w.setAttribute("id","zoomSliderInput"),w.setAttribute("min",t.getMinZoom().toString()),w.setAttribute("max",t.getMaxZoom().toString()),w.setAttribute("step",T.value),w.defaultValue=e.getView().getZoom().toString();var M=document.createElement("label");M.id="zoomSliderLabel",M.htmlFor="zoomSliderInput",M.appendChild(document.createTextNode("Change the zoom level with defined zoom delta:"));var _=document.createElement("label");_.style.marginLeft="10px",_.style.position="relative",_.style.top="-6px",_.id="zoomLevelLabel",_.htmlFor="zoomLevelLabel",_.appendChild(document.createTextNode("zoom: "+e.getView().getZoom())),T.addEventListener("input",function(){w.setAttribute("step",T.value)}),w.addEventListener("input",function(){var t=parseFloat(w.value);document.getElementById("zoomLevelLabel").innerHTML="zoom: "+w.value,e.getView().setZoom(t)});var A=n.cloneNode(),S=document.createElement("input");S.style.width="600px",S.setAttribute("type","range"),S.setAttribute("id","rotationRange"),S.setAttribute("min","0"),S.setAttribute("max","359"),S.setAttribute("step","1"),S.defaultValue="0";var x=document.createElement("label");x.id="rotationLabel",x.htmlFor="rotationRange",x.innerHTML="Change rotation: (0&deg;)",E=this,S.addEventListener("input",function(e){E.changeRotation_(e)}),A.appendChild(x),A.appendChild(document.createElement("br")),A.appendChild(S),e.on("moveend",function(t){let n=e.getView(),a=Math.round(1e3*n.getZoom())/1e3;document.getElementById("zoomLevelLabel").innerHTML="zoom: "+a,document.getElementById("zoomSliderInput").value=a.toString();let i=Math.round(n.getRotation()/(Math.PI/180));document.getElementById("rotationLabel").innerHTML="Change rotation: ("+i+"&deg;)",document.getElementById("rotationRange").value=i.toString()}),C.appendChild(M),C.appendChild(T),C.appendChild(document.createElement("br")),C.appendChild(w),C.appendChild(_);var F=n.cloneNode(),I=document.createElement("button");I.className="demo-mode-button",I.id="demoModeControlBtn",I.innerHTML="&#9658";var R=document.createElement("label");R.id="demoModeControlLabel",R.htmlFor="demoModeControlBtn",R.innerHTML="Demo mode: ",E=this,I.addEventListener("click",function(){E.state.isDemoModeRunning?(I.innerHTML="&#9658;",E.stopDemoMode_()):(I.innerHTML="&#10074;&#10074;",E.startDemoMode_()),E.state.isDemoModeRunning=!E.state.isDemoModeRunning}),F.appendChild(R),F.appendChild(I);var k=document.createElement("div");k.appendChild(a),k.appendChild(r),k.appendChild(c),k.appendChild(h),k.appendChild(g),k.appendChild(v),k.appendChild(C),k.appendChild(A),k.appendChild(F),this.menu.appendChild(k)}changeRotation_(e){let t=document.getElementById("rotationRange"),n=parseInt(t.value),a=n*(Math.PI/180);this.getMap().getView().setRotation(a),document.getElementById("rotationLabel").innerHTML="Change rotation: ("+n+"&deg;)"}toggleHideTiles_(t){let n=document.getElementById("hideTilesCheckbox").checked?0:1;this.getMap().getLayers().forEach(t=>{t instanceof e.layer.Tile&&t.setOpacity(n)})}changeAreaTransparency_(t){let n=document.getElementById("areaTransparencyRange");document.getElementById("areaTransparencyLabel").innerHTML="Set the opacity of areas: ("+n.value+")";let a=parseFloat(n.value);this.getMap().getLayers().forEach(t=>{t instanceof e.layer.Area&&t.setOpacity(a)})}toggleDrawCircles_(e){e.preventDefault();var t=document.getElementById("drawCirclesCheckbox");window.debugDrawCirc=t.checked,this.updateLabelLayer_()}changeLabelFactor_(e){e.preventDefault();var t=document.getElementById("labelfactorRange");document.getElementById("labelFactorLabel").innerHTML="Set the coefficient of the labelFactor. ("+t.value+")",window.labelFacCoeff=t.value,this.updateLabelLayer_()}changeMinTFactor_(e){e.preventDefault();var t=document.getElementById("minTFactorRange");document.getElementById("minTLabel").innerHTML="Set the offset for the calculation of the min_t. ("+t.value+")",window.minTFac=t.value,this.updateLabelLayer_()}changeMinTCoeff_(e){e.preventDefault();var t=document.getElementById("minTCoeffRange");document.getElementById("minTCoeffLabel").innerHTML="Set the coefficient for the calculation of the min_t. ("+t.value+")",window.minTCoeff=t.value,this.updateLabelLayer_()}updateLabelLayer_(){this.getMap().getLayers().forEach(function(t){t instanceof e.layer.Label&&t.getSource().refresh()})}startDemoMode_(){var t,n,a,i,o=this,r=this.getMap().getView(),l=Math.round(6*Math.random())+4,s=3e3*Math.abs(14-l),c=(t=[8,12],n=[48,54],a=Math.random()*(t[1]-t[0]+1)+t[0],i=Math.random()*(n[1]-n[0]+1)+n[0],e.proj.fromLonLat([a,i])),d=Math.random()*(2*Math.PI);r.animate({center:c,duration:2*s,rotation:d},function(){window.setTimeout(function(){o.state.isDemoModeRunning&&o.startDemoMode_()},1)}),r.animate({zoom:l,duration:s},{zoom:14,duration:s})}stopDemoMode_(){this.getMap().getView().cancelAnimations()}}}(e.control||(e.control={}))}(ol||(ol={})),function(e){!function(t){t.LayerMenu=class extends e.control.Control{constructor(t){t=t||{};var n=document.createElement("div");super({element:n,target:t.target}),this.container=n,this.menu=document.createElement("div"),this.menu.className="layer-menu",this.btn=document.createElement("button"),this.btn.innerHTML="&#9776;";var a=this;this.btn.addEventListener("click",function(){a.toggleMenu()}),n.className="ol-layer-menu ol-control ol-collapsed",n.appendChild(this.menu),n.appendChild(this.btn),this.state={open:!1,layers:new e.Collection}}toggleMenu(){!0===this.state.open?this.closeMenu():this.openMenu(),this.state.open=!this.state.open}activateLayerLabel(t){var n=t.target;if(null!=n.value){var a=n.value;this.state.layers.getArray().filter(t=>t instanceof e.layer.Label).forEach(e=>{e.setVisible(e.get("title")===a)})}}activateLayer(t){var n=t.target;if(void 0!==n.value){var a=n.value;n.checked,this.state.layers.getArray().filter(t=>t instanceof e.layer.Tile).forEach(e=>{e.get("title")===a?e.setVisible(!0):e.setVisible(!1)})}}openMenu(){this.getMap().getLayers(),this.btn.innerHTML="X",this.container.classList.remove("ol-collapsed"),""==this.menu.innerHTML&&this.renderMenuContents()}closeMenu(){this.getMap().getLayers(),this.container.classList.add("ol-collapsed"),this.btn.innerHTML="&#9776;"}renderMenuContents(){var t=document.createElement("div");t.innerHTML="<h5>Tiles</h5>";var n=document.createElement("ul");this.state.layers=this.getMap().getLayers(),this.state.layers.forEach(function(t){if(t instanceof e.layer.Tile&&null!=t.get("title")){var a=t.get("title"),i=t.getVisible(),o=document.createElement("li");o.setAttribute("title",t.get("description"));var r=document.createElement("label"),l=document.createElement("input");l.setAttribute("type","radio"),l.setAttribute("name","tiles"),l.setAttribute("value",a),l.checked=i,r.appendChild(l);var s=document.createElement("span");s.innerHTML=a,r.appendChild(s),o.appendChild(r),n.appendChild(o)}}),t.appendChild(n),this.menu.appendChild(t);var a=this;t.addEventListener("click",function(e){a.activateLayer(e)});var i=document.createElement("div");i.innerHTML="<h5>Areas</h5>";var o=document.createElement("ul");i.appendChild(o),this.state.layers.forEach(function(t,n){if(!(t instanceof e.layer.Area)||null==t.get("title"))return;let a=t;var i=document.createElement("li"),r=document.createElement("label"),l=document.createElement("input"),s=document.createElement("span");l.setAttribute("type","checkbox"),l.checked=a.wantDisplay,s.innerHTML=t.get("title"),l.addEventListener("click",function(e){a.wantDisplay=!a.wantDisplay}),r.appendChild(l),r.appendChild(s),i.appendChild(r),o.appendChild(i)}),this.menu.appendChild(i);var r=document.createElement("div");r.innerHTML="<h5>Labels</h5>";var l=document.createElement("ul");this.state.layers.forEach(function(t,n){if(t instanceof e.layer.Label&&null!=t.get("title")){var a=t.get("title"),i=t.getVisible(),o=document.createElement("li"),r=document.createElement("label"),s=document.createElement("input");s.setAttribute("type","radio"),s.setAttribute("name","labels"),s.setAttribute("value",a),s.checked=i,r.appendChild(s);var c=document.createElement("span");c.innerHTML=a,r.appendChild(c),o.appendChild(r),l.appendChild(o)}}),r.appendChild(l),this.menu.appendChild(r),r.addEventListener("click",function(e){a.activateLayerLabel(e)})}}}(e.control||(e.control={}))}(ol||(ol={})),function(e){!function(t){t.Area=class extends e.layer.Vector{constructor(t,n,a){t.style=t.style||e.style.areaStyleFunction(n),t.updateWhileAnimating=t.updateWhileAnimating||!1,t.updateWhileInteracting=t.updateWhileInteracting||!1,t.renderMode=t.renderMode||"image",t.declutter=!0,super(t),this.areaType=n,this.map=a,this._wantDisplay=!0,this.highlightLocation=null;let i=this;this.map.on("moveend",function(e){i.updateVisibility()}),this.getSource()instanceof e.source.Area&&this.getSource().addFeatureListener(function(e){i.checkFeatureForHighlight(e)})}updateVisibility(){let e=this.map.getView().getZoom();this.setVisible(e>=this.areaType.zoom_min&&e<this.areaType.zoom_max&&this._wantDisplay)}highlightFeaturesAt(e){if(!this.areaType.search_highlight)return;this.highlightLocation=e;let t=this;this.getSource().getFeatures().forEach(function(e){t.checkFeatureForHighlight(e)})}get wantDisplay(){return this._wantDisplay}set wantDisplay(e){this._wantDisplay=e,this.updateVisibility()}checkFeatureForHighlight(e){null!=this.highlightLocation&&null!=e&&(e.getGeometry().intersectsCoordinate(this.highlightLocation)?e.set("highlight",!0):e.unset("highlight"))}}}(e.layer||(e.layer={}))}(ol||(ol={})),function(e){!function(t){t.Label=class extends e.layer.Vector{constructor(t){t.style||(t.style=e.style.labelStyleFunction),void 0===t.updateWhileAnimating&&(t.updateWhileAnimating=!0),void 0===t.updateWhileInteracting&&(t.updateWhileInteracting=!0),super(t)}}}(e.layer||(e.layer={}))}(ol||(ol={})),function(e){!function(t){class n extends t.Vector{constructor(t,a){var i=t.url.toString(),o=n.createFeatureLoader(i,a);t.format=new e.format.GeoJSON;var r=0;t.strategy=function(e,t){var n=l.map.getView().getZoom();return Math.abs(r-n)>.2&&(l.loadedExtentsRtree_.clear(),r=n),[e]},t.url=o,super(t);var l=this;this.areaServerUrl=i,this.featureLoader=o,this.featureListeners=new Array,this.map=a}addFeatureListener(e){this.featureListeners.push(e)}addFeatures(e){for(var t=0;t<e.length;t++){var n=e[t],a=this.getFeatureById(n.getId());if(this.notifyFeatureListeners(n),null!=a){var i=n.getGeometry(),o=a.getGeometry();i.getCoordinates()[0].length!=o.getCoordinates()[0].length&&this.removeFeature(a)}}return super.addFeatures(e)}static createFeatureLoader(t,a){return(i,o,r)=>{var l=e.proj.toLonLat(i.slice(0,2)),s=e.proj.toLonLat(i.slice(2,4)),c=a.getView().getZoom(),d={x_min:l[0],x_max:s[0],y_min:l[1],y_max:s[1],zoom:c};return n.buildQuery(t,d)}}static buildQuery(e,t){"object"!=typeof t&&(t={});var n="?",a=!0;for(var i in t)if(t.hasOwnProperty(i)){var o=i,r=t[i];n+=a?o+"="+r:"&"+o+"="+r,a=!1}return e+n}notifyFeatureListeners(e){this.featureListeners.forEach(function(t){t(e)})}}t.Area=n}(e.source||(e.source={}))}(ol||(ol={})),function(e){!function(t){class n extends t.Vector{constructor(t){var a=t.url.toString(),i=n.createFeatureLoader(a);t.format=new e.format.GeoJSON,t.strategy=e.loadingstrategy.bbox,t.url=i,super(t),this.labelServerUrl=a,this.featureLoader=i}static createFeatureLoader(t){return(a,i,o)=>{var r=e.proj.toLonLat(a.slice(0,2)),l=e.proj.toLonLat(a.slice(2,4)),s=e.resolutionToMinT(i),c={x_min:r[0],x_max:l[0],y_min:r[1],y_max:l[1],t_min:s};return n.buildQuery(t,c)}}static buildQuery(e,t){"object"!=typeof t&&(t={});var n="?",a=!0;for(var i in t)if(t.hasOwnProperty(i)){var o=i,r=t[i];n+=a?o+"="+r:"&"+o+"="+r,a=!1}return e+n}}t.Label=n}(e.source||(e.source={}))}(ol||(ol={})),function(e){!function(t){t.STYLE_AREA_STATES=new e.style.Style({stroke:new e.style.Stroke({color:"#d1352a",width:4})}),t.STYLE_AREA_TOWNS=new e.style.Style({stroke:new e.style.Stroke({color:"#a34905",width:3})}),t.STYLE_AREA_LAKES=new e.style.Style({stroke:new e.style.Stroke({color:"#210192",width:1}),fill:new e.style.Fill({color:"rgba(44, 2, 196, 0.8)"})}),t.STYLE_AREA_COMMERCIAL=new e.style.Style({fill:new e.style.Fill({color:"rgb(238, 206, 209)"})}),t.STYLE_AREA_MILITARY=new e.style.Style({fill:new e.style.Fill({color:"#d11313"})}),t.STYLE_AREA_RESIDENTIAL=new e.style.Style({fill:new e.style.Fill({color:"rgb(218, 218, 218)"})}),t.STYLE_AREA_WOODLAND=new e.style.Style({stroke:new e.style.Stroke({color:"#248c26",width:1}),fill:new e.style.Fill({color:"rgba(41, 163, 43, 0.6)"})}),t.STYLE_LINE_RIVERS=new e.style.Style({stroke:new e.style.Stroke({color:"#2c02c4",width:2})}),t.STYLE_AREA_HIGHLIGHT=new e.style.Style({fill:new e.style.Fill({color:"rgba(235, 155, 52, 0.6)"})}),t.STYLE_AREA_POLYGON_POINTS=new e.style.Style({image:new e.style.Circle({radius:5,fill:new e.style.Fill({color:"orange"})}),geometry:function(t){var n=t.getGeometry();if(n instanceof e.geom.Polygon){var a=n;return new e.geom.MultiPoint(a.getCoordinates()[0])}if(n instanceof e.geom.MultiPolygon){for(var i=n.getCoordinates(),o=[],r=0;r<i.length;r++)for(var l=0;l<i[r][0].length;l++)o.push(i[r][0][l]);return new e.geom.MultiPoint(o)}}})}(e.style||(e.style={}))}(ol||(ol={})),function(e){!function(e){const t=new TypedMap([["states",[e.STYLE_AREA_STATES]],["towns",[e.STYLE_AREA_TOWNS]],["rivers",[e.STYLE_LINE_RIVERS]],["lakes",[e.STYLE_AREA_LAKES]],["commercial",[e.STYLE_AREA_COMMERCIAL]],["residential",[e.STYLE_AREA_RESIDENTIAL]],["military",[e.STYLE_AREA_MILITARY]],["woodland",[e.STYLE_AREA_WOODLAND]]]);e.areaStyleFunction=function(n){let a=t.get(n.resource)||[];return(t,n)=>t.get("highlight")?a.concat([e.STYLE_AREA_HIGHLIGHT]):a}}(e.style||(e.style={}))}(ol||(ol={})),function(e){let t;!function(e){e[e.ICON=0]="ICON",e[e.TEXT=1]="TEXT"}(t||(t={}));const n=new TypedMap([["aboriginal","buddhist.svg"],["administration","town_hall.svg"],["airport","aerodrome.12.svg"],["artgallery","artwork.svg"],["assortment","buddhist.svg"],["atm","atm.svg"],["bank","bank.svg"],["bar","bar.svg"],["bbq","picnic.svg"],["beergarden","biergarten.svg"],["bicycle_shop","shop/bicycle.svg"],["boat","buddhist.svg"],["breastfeeding","buddhist.svg"],["bus","bus_stop.12.svg"],["cafeteria","shop/coffee.svg"],["car","shop/car.svg"],["car_share","rental_car.svg"],["casino","buddhist.svg"],["catholicgrave","grave_yard_christian.svg"],["church","christian.svg"],["cinema","cinema.svg"],["clock","buddhist.svg"],["coffee","shop/coffee.svg"],["communitycentre","community_centre.svg"],["congress","town_hall.svg"],["court","courthouse.svg"],["dance_class","buddhist.svg"],["dancinghall","buddhist.svg"],["daycare","buddhist.svg"],["dentist","dentist.svg"],["drinkingfountain","fountain.svg"],["e-bike-charging","charging_station.svg"],["fast_food","fast_food.svg"],["ferry","ferry.svg"],["fillingstation","fuel.svg"],["firemen","firestation.svg"],["firstaid","buddhist.svg"],["fountain","fountain.svg"],["hospital","hospital.svg"],["ice_cream","shop/ice_cream.svg"],["library","library.svg"],["market","shop/supermarket.svg"],["medicalstore","pharmacy.svg"],["medicine","pharmacy.svg"],["music_classical","shop/musical_instrument.svg"],["nursing_home_icon","buddhist.svg"],["parking","parking.svg"],["parking_bicycle","bicycle_parking.svg"],["perfumery","shop/perfumery.svg"],["police","police.svg"],["postal","post_office.svg"],["restaurant","restaurant.svg"],["sauna","buddhist.svg"],["school","buddhist.svg"],["spa","buddhist.svg"],["stripclub","buddhist.svg"],["taxi","taxi.svg"],["telephone","telephone.svg"],["theatre","theatre.svg"],["toilets","toilets.svg"],["tools","buddhist.svg"],["trash","waste_basket.10.svg"],["undefined","buddhist.svg"],["university","buddhist.svg"],["veterinary","veterinary.svg"],["waiting","bench.svg"],["wifi","buddhist.svg"],["workoffice","buddhist.svg"]]),a="https://rawgit.com/gravitystorm/openstreetmap-carto/master/symbols/";class i{constructor(t,n){this.feature=t,this.text=t.get("name"),this.t=t.get("t"),this.factor=t.get("lbl_fac"),this.resolveType(),this.min_t=e.resolutionToMinT(n)}resolveType(){if(this.text.includes("icon:")){this.type=t.ICON;var e=this.text.replace("icon:","");this.iconUrl=i.getIconURL(e)}else this.type=t.TEXT}render(){var n=null;if(this.min_t>this.t)return null;if(this.type==t.ICON){const t=this.text;void 0===i.iconCache.get(t)?(n=new e.style.Style({image:new e.style.Icon({crossOrigin:"anonymous",src:this.iconUrl})}),i.iconCache.set(t,n)):n=i.iconCache.get(t)}else if(this.type==t.TEXT){var a=window.debugDrawCirc?this.text+":debug":this.text;if(void 0===i.textCache.get(a)){var o=e.calculateLabelFactor(this.feature),r=o+"px Consolas";this.text.indexOf("\\")>=0&&(this.text=this.text.replace("\\n","\n"));var l=o*i.getMaxLabelLength(this.text)*.26,s=new e.style.Circle({radius:l,stroke:new e.style.Stroke({color:"red"})}),c=new e.style.Text({text:this.text,font:r,stroke:new e.style.Stroke({color:"#333",width:4}),fill:new e.style.Fill({color:"#fff"})});n=new e.style.Style({image:1==window.debugDrawCirc?s:null,text:c}),i.textCache.set(a,n)}else n=i.textCache.get(a)}return n}static getIconURL(e){let t=n.get("undefined");return void 0!==n.get(e)&&(t=n.get(e)),a+t}static getMaxLabelLength(e){for(var t=e.split("\n"),n=0,a=t.length,i=0;i<a;i++)n<t[i].length&&(n=t[i].length);return n}}i.iconCache=new TypedMap,i.textCache=new TypedMap,e.Label=i}(ol||(ol={})),function(e){!function(t){t.labelStyleFunction=function(t,n){return new e.Label(t,n).render()}}(e.style||(e.style={}))}(ol||(ol={}));